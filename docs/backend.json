{
  "entities": {
    "IncidentReport": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "IncidentReport",
      "type": "object",
      "description": "Represents a report of a Gender-Based Violence (GBV) incident.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the incident report."
        },
        "reportDetails": {
          "type": "string",
          "description": "Detailed description of the incident."
        },
        "incidentType": {
          "type": "string",
          "description": "Type of incident reported (e.g., physical assault, harassment)."
        },
        "location": {
          "type": "string",
          "description": "Location where the incident occurred."
        },
        "dateOfIncident": {
          "type": "string",
          "description": "Date and time when the incident occurred.",
          "format": "date-time"
        },
        "reporterAge": {
          "type": "number",
          "description": "Age of the person reporting the incident."
        },
        "reporterGender": {
          "type": "string",
          "description": "Gender of the person reporting the incident."
        },
        "additionalNotes": {
          "type": "string",
          "description": "Any additional notes or information related to the incident."
        }
      },
      "required": [
        "id",
        "reportDetails",
        "incidentType",
        "location",
        "dateOfIncident"
      ]
    },
    "Resource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resource",
      "type": "object",
      "description": "Represents a support resource or help center.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource."
        },
        "name": {
          "type": "string",
          "description": "Name of the resource."
        },
        "description": {
          "type": "string",
          "description": "Description of the services offered by the resource."
        },
        "address": {
          "type": "string",
          "description": "Address of the resource."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the resource."
        },
        "email": {
          "type": "string",
          "description": "Email address of the resource.",
          "format": "email"
        },
        "website": {
          "type": "string",
          "description": "Website URL of the resource.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the resource (e.g., legal, medical, shelter)."
        },
        "latitude": {
          "type": "number",
          "description": "Latitude coordinate of the resource location."
        },
        "longitude": {
          "type": "number",
          "description": "Longitude coordinate of the resource location."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "address",
        "phoneNumber",
        "category",
        "latitude",
        "longitude"
      ]
    },
    "CommunityPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CommunityPost",
      "type": "object",
      "description": "Represents a post on the anonymous community board.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the community post."
        },
        "content": {
          "type": "string",
          "description": "Content of the post."
        },
        "timestamp": {
          "type": "string",
          "description": "Date and time when the post was created.",
          "format": "date-time"
        },
        "likes": {
          "type": "number",
          "description": "Number of likes the post has received."
        },
        "dislikes": {
          "type": "number",
          "description": "Number of dislikes the post has received."
        }
      },
      "required": [
        "id",
        "content",
        "timestamp"
      ]
    },
    "SafeLocation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SafeLocation",
      "type": "object",
      "description": "Represents a safe location identified by the Safe Location Finder.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the safe location."
        },
        "name": {
          "type": "string",
          "description": "Name of the safe location."
        },
        "address": {
          "type": "string",
          "description": "Address of the safe location."
        },
        "latitude": {
          "type": "number",
          "description": "Latitude coordinate of the safe location."
        },
        "longitude": {
          "type": "number",
          "description": "Longitude coordinate of the safe location."
        },
        "type": {
          "type": "string",
          "description": "Type of safe location (e.g., police station, hospital)."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the safe location."
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "latitude",
        "longitude",
        "type"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/incident_reports/{incidentReportId}",
        "definition": {
          "entityName": "IncidentReport",
          "schema": {
            "$ref": "#/backend/entities/IncidentReport"
          },
          "description": "Stores anonymous incident reports for a specific user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user."
            },
            {
              "name": "incidentReportId",
              "description": "Unique identifier for the incident report."
            }
          ]
        }
      },
      {
        "path": "/resources/{resourceId}",
        "definition": {
          "entityName": "Resource",
          "schema": {
            "$ref": "#/backend/entities/Resource"
          },
          "description": "Stores publicly accessible resource information.",
          "params": [
            {
              "name": "resourceId",
              "description": "Unique identifier for the resource."
            }
          ]
        }
      },
      {
        "path": "/community_posts/{communityPostId}",
        "definition": {
          "entityName": "CommunityPost",
          "schema": {
            "$ref": "#/backend/entities/CommunityPost"
          },
          "description": "Stores community posts for the anonymous discussion board.",
          "params": [
            {
              "name": "communityPostId",
              "description": "Unique identifier for the community post."
            }
          ]
        }
      },
      {
        "path": "/safe_locations/{safeLocationId}",
        "definition": {
          "entityName": "SafeLocation",
          "schema": {
            "$ref": "#/backend/entities/SafeLocation"
          },
          "description": "Stores information about safe locations identified by the Safe Location Finder.",
          "params": [
            {
              "name": "safeLocationId",
              "description": "Unique identifier for the safe location."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support SafeHaven's core features. Incident reports are now stored in a subcollection under each user to ensure that only the user who created them can access them, enforcing privacy. All other collections (resources, community_posts, safe_locations) remain at the top level and are publicly accessible to ensure information is widely available. This hybrid model balances privacy for sensitive data with open access for public resources."
  }
}
