{
  "entities": {
    "IncidentReport": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "IncidentReport",
      "type": "object",
      "description": "Represents a report of a Gender-Based Violence (GBV) incident.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the incident report."
        },
        "reportDetails": {
          "type": "string",
          "description": "Detailed description of the incident."
        },
        "incidentType": {
          "type": "string",
          "description": "Type of incident reported (e.g., physical assault, harassment)."
        },
        "location": {
          "type": "string",
          "description": "Location where the incident occurred."
        },
        "dateOfIncident": {
          "type": "string",
          "description": "Date and time when the incident occurred.",
          "format": "date-time"
        },
        "reporterAge": {
          "type": "number",
          "description": "Age of the person reporting the incident."
        },
        "reporterGender": {
          "type": "string",
          "description": "Gender of the person reporting the incident."
        },
        "additionalNotes": {
          "type": "string",
          "description": "Any additional notes or information related to the incident."
        }
      },
      "required": [
        "id",
        "reportDetails",
        "incidentType",
        "location",
        "dateOfIncident"
      ]
    },
    "Resource": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Resource",
      "type": "object",
      "description": "Represents a support resource or help center.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the resource."
        },
        "name": {
          "type": "string",
          "description": "Name of the resource."
        },
        "description": {
          "type": "string",
          "description": "Description of the services offered by the resource."
        },
        "address": {
          "type": "string",
          "description": "Address of the resource."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the resource."
        },
        "email": {
          "type": "string",
          "description": "Email address of the resource.",
          "format": "email"
        },
        "website": {
          "type": "string",
          "description": "Website URL of the resource.",
          "format": "uri"
        },
        "category": {
          "type": "string",
          "description": "Category of the resource (e.g., legal, medical, shelter)."
        },
        "latitude": {
          "type": "number",
          "description": "Latitude coordinate of the resource location."
        },
        "longitude": {
          "type": "number",
          "description": "Longitude coordinate of the resource location."
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "address",
        "phoneNumber",
        "category",
        "latitude",
        "longitude"
      ]
    },
    "CommunityPost": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CommunityPost",
      "type": "object",
      "description": "Represents a post on the anonymous community board.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the community post."
        },
        "content": {
          "type": "string",
          "description": "Content of the post."
        },
        "timestamp": {
          "type": "string",
          "description": "Date and time when the post was created.",
          "format": "date-time"
        },
        "likes": {
          "type": "number",
          "description": "Number of likes the post has received."
        },
        "dislikes": {
          "type": "number",
          "description": "Number of dislikes the post has received."
        }
      },
      "required": [
        "id",
        "content",
        "timestamp"
      ]
    },
    "SafeLocation": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "SafeLocation",
      "type": "object",
      "description": "Represents a safe location identified by the Safe Location Finder.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the safe location."
        },
        "name": {
          "type": "string",
          "description": "Name of the safe location."
        },
        "address": {
          "type": "string",
          "description": "Address of the safe location."
        },
        "latitude": {
          "type": "number",
          "description": "Latitude coordinate of the safe location."
        },
        "longitude": {
          "type": "number",
          "description": "Longitude coordinate of the safe location."
        },
        "type": {
          "type": "string",
          "description": "Type of safe location (e.g., police station, hospital)."
        },
        "phoneNumber": {
          "type": "string",
          "description": "Phone number of the safe location."
        }
      },
      "required": [
        "id",
        "name",
        "address",
        "latitude",
        "longitude",
        "type"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/incident_reports/{incidentReportId}",
        "definition": {
          "entityName": "IncidentReport",
          "schema": {
            "$ref": "#/backend/entities/IncidentReport"
          },
          "description": "Stores anonymous incident reports. No authorization beyond validation is required.",
          "params": [
            {
              "name": "incidentReportId",
              "description": "Unique identifier for the incident report."
            }
          ]
        }
      },
      {
        "path": "/resources/{resourceId}",
        "definition": {
          "entityName": "Resource",
          "schema": {
            "$ref": "#/backend/entities/Resource"
          },
          "description": "Stores publicly accessible resource information.",
          "params": [
            {
              "name": "resourceId",
              "description": "Unique identifier for the resource."
            }
          ]
        }
      },
      {
        "path": "/community_posts/{communityPostId}",
        "definition": {
          "entityName": "CommunityPost",
          "schema": {
            "$ref": "#/backend/entities/CommunityPost"
          },
          "description": "Stores community posts for the anonymous discussion board.",
          "params": [
            {
              "name": "communityPostId",
              "description": "Unique identifier for the community post."
            }
          ]
        }
      },
      {
        "path": "/safe_locations/{safeLocationId}",
        "definition": {
          "entityName": "SafeLocation",
          "schema": {
            "$ref": "#/backend/entities/SafeLocation"
          },
          "description": "Stores information about safe locations identified by the Safe Location Finder.",
          "params": [
            {
              "name": "safeLocationId",
              "description": "Unique identifier for the safe location."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support SafeHaven's core features while adhering to the principles of Authorization Independence, Structural Segregation, and Access Modeling.  \n\n1.  **Incident Reports:** Incident reports are stored anonymously and globally accessible for analysis but not individually identifiable.  No specific authorization is required beyond basic validation.\n2.  **Resources:** Resources are stored globally and are publicly accessible. No specific authorization beyond validation is required.\n3.  **Community Posts:** Community posts are stored globally and are publicly accessible. No specific authorization beyond validation is required.\n4.  **Safe Locations:** Safe locations are stored globally and are publicly accessible. No specific authorization beyond validation is required.\n\nThis structure ensures that security rules are simple and maintainable, focusing on data validation rather than complex access control logic. Because all data is globally accessible, authorization independence is implicitly achieved; there is no need for denormalization.\n\nThe QAPs are addressed via Structural Segregation: each type of data (incident reports, resources, community posts, safe locations) is stored in its own collection, and all documents within a collection share the same security requirements (public read access, restricted write access).\n"
  }
}